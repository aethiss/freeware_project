{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react'; // import PropTypes from 'prop-types'\n\nimport Link from 'next/link';\nimport Router from 'next/router'; // helpers\n\nimport Swal from 'sweetalert2'; // Actions\n\nimport { loginUser } from '../../../redux/actions/user';\nimport { setCookie } from '../../../libs/cookieHelper';\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onLogin\", function () {\n      var dispatch = _this.props.dispatch;\n      var _this$state = _this.state,\n          email = _this$state.email,\n          password = _this$state.password; // console.log('onLogin', this.props, this.state)\n\n      dispatch(loginUser(email, password)).then(function (res) {\n        console.log('user login success', res);\n        setCookie('token', res[0].token, 60);\n        Router.push({\n          pathname: '/projects'\n        });\n      })[\"catch\"](function (err) {\n        console.log('user login error', err);\n        Swal.fire('Error...', err.msg, 'error');\n      });\n    });\n\n    _this.state = {\n      email: '',\n      password: ''\n    };\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(\"div\", null, __jsx(\"h2\", null, \"Login\"), __jsx(\"form\", {\n        onSubmit: this.onLogin\n      }, __jsx(\"p\", null, __jsx(\"label\", {\n        htmlFor: \"firstName\"\n      }, \"Email\", __jsx(\"input\", {\n        type: \"text\",\n        onChange: function onChange(e) {\n          _this2.setState({\n            email: e.target.value\n          });\n        }\n      }))), __jsx(\"p\", null, __jsx(\"label\", {\n        htmlFor: \"lastName\"\n      }, \"password\", __jsx(\"input\", {\n        type: \"text\",\n        onChange: function onChange(e) {\n          _this2.setState({\n            password: e.target.value\n          });\n        }\n      }))), __jsx(\"input\", {\n        type: \"submit\",\n        value: \"Submit\"\n      })), __jsx(\"div\", null, __jsx(\"hr\", null), __jsx(Link, {\n        href: \"/register\"\n      }, __jsx(\"button\", null, \"Register\"))));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default Login;","map":{"version":3,"sources":["/Users/aethiss/Web/Projects/freewareIdee/freeware-beta/src/components/common/login/Login.js"],"names":["React","Component","Link","Router","Swal","loginUser","setCookie","Login","props","dispatch","state","email","password","then","res","console","log","token","push","pathname","err","fire","msg","onLogin","e","setState","target","value"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC,C,CACA;;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,MAAP,MAAmB,aAAnB,C,CAEA;;AACA,OAAOC,IAAP,MAAiB,aAAjB,C,CAEA;;AACA,SAASC,SAAT,QAA0B,6BAA1B;AACA,SAASC,SAAT,QAA0B,4BAA1B;;IAEMC,K;;;;;AACJ,iBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,+EAAMA,KAAN;;AADiB,8DAQT,YAAM;AAAA,UACNC,QADM,GACO,MAAKD,KADZ,CACNC,QADM;AAAA,wBAEc,MAAKC,KAFnB;AAAA,UAENC,KAFM,eAENA,KAFM;AAAA,UAECC,QAFD,eAECA,QAFD,EAGd;;AACAH,MAAAA,QAAQ,CAACJ,SAAS,CAACM,KAAD,EAAQC,QAAR,CAAV,CAAR,CACGC,IADH,CACQ,UAAAC,GAAG,EAAI;AACXC,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCF,GAAlC;AACAR,QAAAA,SAAS,CAAC,OAAD,EAAUQ,GAAG,CAAC,CAAD,CAAH,CAAOG,KAAjB,EAAwB,EAAxB,CAAT;AACAd,QAAAA,MAAM,CAACe,IAAP,CAAY;AACVC,UAAAA,QAAQ,EAAE;AADA,SAAZ;AAGD,OAPH,WAQS,UAAAC,GAAG,EAAI;AACZL,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCI,GAAhC;AACAhB,QAAAA,IAAI,CAACiB,IAAL,CAAU,UAAV,EAAsBD,GAAG,CAACE,GAA1B,EAA+B,OAA/B;AACD,OAXH;AAYD,KAxBkB;;AAEjB,UAAKZ,KAAL,GAAa;AACXC,MAAAA,KAAK,EAAE,EADI;AAEXC,MAAAA,QAAQ,EAAE;AAFC,KAAb;AAFiB;AAMlB;;;;6BAoBQ;AAAA;;AACP,aACE,mBACE,0BADF,EAEE;AAAM,QAAA,QAAQ,EAAE,KAAKW;AAArB,SACE,iBACE;AAAO,QAAA,OAAO,EAAC;AAAf,kBAEE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,QAAQ,EAAE,kBAAAC,CAAC,EAAI;AACb,UAAA,MAAI,CAACC,QAAL,CAAc;AAAEd,YAAAA,KAAK,EAAEa,CAAC,CAACE,MAAF,CAASC;AAAlB,WAAd;AACD;AAJH,QAFF,CADF,CADF,EAYE,iBACE;AAAO,QAAA,OAAO,EAAC;AAAf,qBAEE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,QAAQ,EAAE,kBAAAH,CAAC,EAAI;AACb,UAAA,MAAI,CAACC,QAAL,CAAc;AAAEb,YAAAA,QAAQ,EAAEY,CAAC,CAACE,MAAF,CAASC;AAArB,WAAd;AACD;AAJH,QAFF,CADF,CAZF,EAuBE;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,KAAK,EAAC;AAA3B,QAvBF,CAFF,EA2BE,mBACE,iBADF,EAEE,MAAC,IAAD;AAAM,QAAA,IAAI,EAAC;AAAX,SACE,iCADF,CAFF,CA3BF,CADF;AAoCD;;;;EAhEiB1B,S;;AAmEpB,eAAeM,KAAf","sourcesContent":["import React, { Component } from 'react'\n// import PropTypes from 'prop-types'\nimport Link from 'next/link'\nimport Router from 'next/router'\n\n// helpers\nimport Swal from 'sweetalert2'\n\n// Actions\nimport { loginUser } from '../../../redux/actions/user'\nimport { setCookie } from '../../../libs/cookieHelper'\n\nclass Login extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      email: '',\n      password: '',\n    }\n  }\n\n  onLogin = () => {\n    const { dispatch } = this.props\n    const { email, password } = this.state\n    // console.log('onLogin', this.props, this.state)\n    dispatch(loginUser(email, password))\n      .then(res => {\n        console.log('user login success', res)\n        setCookie('token', res[0].token, 60)\n        Router.push({\n          pathname: '/projects',\n        })\n      })\n      .catch(err => {\n        console.log('user login error', err)\n        Swal.fire('Error...', err.msg, 'error')\n      })\n  }\n\n  render() {\n    return (\n      <div>\n        <h2>Login</h2>\n        <form onSubmit={this.onLogin}>\n          <p>\n            <label htmlFor=\"firstName\">\n              Email\n              <input\n                type=\"text\"\n                onChange={e => {\n                  this.setState({ email: e.target.value })\n                }}\n              />\n            </label>\n          </p>\n          <p>\n            <label htmlFor=\"lastName\">\n              password\n              <input\n                type=\"text\"\n                onChange={e => {\n                  this.setState({ password: e.target.value })\n                }}\n              />\n            </label>\n          </p>\n          <input type=\"submit\" value=\"Submit\" />\n        </form>\n        <div>\n          <hr />\n          <Link href=\"/register\">\n            <button>Register</button>\n          </Link>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}